# 数据库快速开始指南

## 📦 文件位置

所有数据库相关文件位于 `backend/database/` 目录：

```
backend/database/
├── schema.sql      # 数据库结构（17张表）
├── seed.sql        # 测试数据
├── migrate.ts      # 迁移工具
└── README.md       # 详细文档
```

## 🚀 快速开始（3 步）

### 1️⃣ 配置数据库连接

在 `backend/.env` 文件中添加：

```env
DATABASE_URL=postgresql://user:password@host:5432/database
```

**推荐云数据库**：

- [Neon](https://neon.tech) - 免费 500MB，无需信用卡
- [Supabase](https://supabase.com) - 免费 500MB + 2GB 带宽
- [Railway](https://railway.app) - 免费 $5/月额度

### 2️⃣ 安装依赖

```bash
cd backend
npm install
```

### 3️⃣ 初始化数据库

```bash
# 一键完成：删除旧表 + 创建新表 + 填充测试数据
npm run db:fresh
```

完成！现在你有一个包含完整测试数据的数据库。

## 📊 测试数据概览

执行 `npm run db:fresh` 后，数据库会包含：

### 👥 测试账户（7 个）

| 角色   | 用户名       | 密码        | 说明         |
| ------ | ------------ | ----------- | ------------ |
| 管理员 | `admin`      | `Admin123!` | 平台管理员   |
| 开发者 | `developer1` | `Dev123!`   | 游戏开发者 1 |
| 开发者 | `developer2` | `Dev123!`   | 游戏开发者 2 |
| 用户   | `user1`      | `User123!`  | 普通用户 1   |
| 用户   | `user2`      | `User123!`  | 普通用户 2   |
| 用户   | `user3`      | `User123!`  | 普通用户 3   |
| 版主   | `moderator1` | `Mod123!`   | 社区版主     |

### 🎮 测试游戏（5 个）

1. **VR 战斗先锋** - 射击游戏，¥129，评分 4.6
2. **谜境探索** - 解谜游戏，¥68，评分 4.8
3. **节奏之星** - 音乐游戏，免费，评分 4.7
4. **健身达人 VR** - 健身应用，¥49，评分 4.5
5. **恐怖医院** - 恐怖游戏，¥89，评分 4.4

### 📦 其他数据

- **8 个游戏分类**：动作冒险、解谜益智、社交互动等
- **10 个标签**：多人游戏、中文支持、剧情向等
- **5 条评论**：用户真实评论示例
- **4 个帖子**：论坛讨论示例
- **完整关系数据**：好友、订单、通知等

## 🛠️ 常用命令

```bash
# 仅创建表结构（不填充数据）
npm run db:init

# 仅填充测试数据（需先执行init）
npm run db:seed

# 删除所有表
npm run db:reset

# 完整重置（推荐开发使用）
npm run db:fresh
```

## 💡 下一步

数据库配置完成后，你可以：

1. **开发 API 接口** - 参考 `docs/06-API接口文档.md`
2. **测试数据查询** - 使用测试账户登录
3. **前端对接** - 调用后端 API 获取数据

## 📝 注意事项

⚠️ **开发环境专用**

- `seed.sql` 中的测试数据仅用于开发和测试
- 生产环境请勿使用这些弱密码
- 生产环境仅执行 `npm run db:init`

✅ **数据安全**

- `.env` 文件已加入 `.gitignore`
- 不要将数据库密码提交到 Git
- 定期备份生产数据库

## 🔗 相关文档

- [数据库设计详解](./05-数据库设计.md) - ER 图、表结构说明
- [数据库使用文档](../backend/database/README.md) - 完整文档
- [API 接口文档](./06-API接口文档.md) - 接口定义

---

**快速链接**：

- Neon 注册：https://neon.tech
- Supabase 注册：https://supabase.com
- PostgreSQL 文档：https://www.postgresql.org/docs/

**最后更新**：2024-12-02
